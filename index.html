<!DOCTYPE html>
<html>
    <body>

    <canvas id="myCanvas" width="300" height="150" style="border:1px solid #d3d3d3;">
        Your browser does not support the HTML5 canvas tag.
    </canvas>

    <script>
        var c = document.getElementById("myCanvas");
        var ctx = c.getContext("2d");

        var game = { score: 0, lives: 3, state: 'play' };

        var gameObjects = [];

        gameObjects.push({ type: 'harm', x: 100, y: 75, r: 10, color: 'red', speed: 1 });
        gameObjects.push({ type: 'benefit', x: 25, y: 25, r: 30, color: 'yellow', speed: 1 });
        gameObjects.push({ type: 'player', x: 32, y: c.height / 2, r: 15, color: 'green', speed: 1 });

        var player = gameObjects[2];

        var background = new Image();
        background.src = 'bg.png';

        window.addEventListener('keydown', function(e)
        {
            if(e.key == 'ArrowUp')
            {
                player.y -= 2;
            }
            else if(e.key == 'ArrowDown')
            {
                player.y += 2;
            }
        });

        function colliding(circle1, circle2)
        {
            var dx = circle1.x - circle2.x;
            var dy = circle1.y - circle2.y;
            var distance = Math.sqrt(dx * dx + dy * dy);

            return distance < circle1.r + circle2.r;
        }

        function draw()
        {
            ctx.clearRect(0, 0, c.width, c.height);

            ctx.drawImage(background, 0, 0, 300, 150);

            gameObjects.forEach(function(g) {
                if(g.x > c.width + g.r)
                {
                    g.x = -g.r;
                    g.y = Math.random() * c.height;
                }

                ctx.beginPath();
                ctx.arc(g.x, g.y, g.r, 0, 2 * Math.PI);
                ctx.fillStyle = g.color;
                ctx.fill();

                var score = 'Score: ' + game.score;
                var lives = 'Lives: ' + game.lives;
                ctx.font = '16px Arial';
                ctx.fillText(score, 200, 145);
                ctx.fillText(lives, 200, 20);

                if(g.type !== 'player')
                {
                    g.x += g.speed;

                    if(colliding(player, g))
                    {
                        if(g.type === 'harm')
                        {
                            game.lives--;

                            if(game.lives === 0)
                            {
                                game.state = 'over';
                            }
                        }
                        else if(g.type === 'benefit')
                        {
                            game.score += 100;
                        }
                    }
                }
            });

            window.requestAnimationFrame(draw);
        }

        background.onload = function() {
            window.requestAnimationFrame(draw);
        };
    </script> 

    </body>
</html>
